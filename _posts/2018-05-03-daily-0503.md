---
layout: post
title: "Daily 0503"
description: ""
category: 
tags: []
---
{% include JB/setup %}



## vCPU的解释    

虛擬主機（Virtual Machine，VM）的CPU稱之為vCPU，當虛擬主機需要CPU運算資源的時候，VMkernel會將此虛擬主機需要的運算資源對應（Mapping）到實體伺服器的CPU核心運算HEC（Hardware Execution Context）能力，以使得虛擬主機得以進行運算。簡單來說，HEC就是實體伺服器的CPU核心數（Cores）。   

所以，如圖5所示當虛擬主機配有1 vCPU，在需要運算資源時，只要VMkernel對應到實體主機上其中一個HEC就可以執行運算；若虛擬主機配有2 vCPU，在需要運算資源時，則必須對應到2個HEC才能運算；若4 vCPU則要對應4個HEC才能運算。  


![虛擬主機vCPU與實體伺服器HEC對應](http://www.netadmin.com.tw/images/news/NP120109000212031413512801.png)   
[更多内容 ](http://www.netadmin.com.tw/article_content.aspx?sn=1201090002&jump=2)  


## google python style guide  

Python 是 Google主要的脚本语言。这本风格指南主要包含的是针对python的编程准则。  
[中文版Git](https://github.com/zh-google-styleguide/zh-google-styleguide/tree/master/google-python-styleguide)   

## elk 

更新license: [Update License API](https://www.elastic.co/guide/en/elasticsearch/reference/6.2/update-license.html)   
注册之后，可以使用xpack, 后台日志不会重复打   

```
logstash_1       | [2018-05-03T11:31:00,614][INFO ][logstash.licensechecker.licensereader] Running health check to see if an Elasticsearch connection is working {:healthcheck_url=>http://logstash_system:xxxxxx@elasticsearch:9200/, :path=>"/"}
logstash_1       | [2018-05-03T11:31:00,615][WARN ][logstash.licensechecker.licensereader] Attempted to resurrect connection to dead ES instance, but got an error. {:url=>"http://logstash_system:xxxxxx@elasticsearch:9200/", :error_type=>LogStash::Outputs::ElasticSearch::HttpClient::Pool::BadResponseCodeError, :error=>"Got response code '401' contacting Elasticsearch at URL 'http://elasticsearch:9200/'"}
logstash_1       | [2018-05-03T11:31:03,796][INFO ][logstash.outputs.elasticsearch] Running health check to see if an Elasticsearch connection is working {:healthcheck_url=>http://logstash_system:xxxxxx@elasticsearch:9200/, :path=>"/"}
logstash_1       | [2018-05-03T11:31:03,797][WARN ][logstash.outputs.elasticsearch] Attempted to resurrect connection to dead ES instance, but got an error. {:url=>"http://logstash_system:xxxxxx@elasticsearch:9200/", :error_type=>LogStash::Outputs::ElasticSearch::HttpClient::Pool::BadResponseCodeError, :error=>"Got response code '401' contacting Elasticsearch at URL 'http://elasticsearch:9200/'"}
```



## elasticsearch  

some Elasticsearch terminology: 
an Elasticsearch `cluster` is made up of one or more `nodes`. Each of these nodes contains `indexes` which are split into multiple `shards`. Elasticsearch makes copies of these shards called `replicas`. These (primary) shards and replicas are then placed on various nodes throughout the cluster.   
[更多内容](http://chrissimpson.co.uk/elasticsearch-yellow-cluster-status-explained.html)   



## nginx配置
(location =) > (location 完整路径) > (location ^~ 路径) > (location ~,~* 正则顺序) > (location 部分起始路径) > (/)  
[更多详情](http://seanlook.com/2015/05/17/nginx-location-rewrite/)  

## tornado

sqlalchemy 和 tornado的结合： session管理放在了每次的request的请求中处理为最佳，以及每次请求经来时，实例化session, 请求结束后, 将session关闭  
scoped_session session 注册表，从中取用和还取，并保证多次取用的为统一session   
此处的sqlalchemy的数据库查询，并不是异步，当使用tornado 的异步特性时，遇到查询数据库慢时，还是会阻塞的，此时我们更多的需要考虑的  

[我心中的 tornado 最佳实践](https://segmentfault.com/a/1190000008650442)  


## python 
MD，最喜欢的还是贴好文章的链接  
[PYTHON中YIELD的解释](http://www.wklken.me/posts/2013/07/18/python-translate-yield.html): 这个代码解释详细了，什么是“鸭子类型" (duck typing)   

再来一个链接: [Iterables vs. Iterators vs. Generators](http://nvie.com/posts/iterators-vs-generators/) 原来generators还有两种类型(Type): generator functions and generator expressions   

> 这真是一个很长的story啊

